@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix : <http://liris.cnrs.fr/silex/2009/ktbs#> .

<> :contains <helloworld> .

<helloworld>
    a :Method ;
    :inherits :script-python ;
    :hasParameter """script=
from __future__ import with_statement

def check_sources_and_parameters(sources, parameters):
    if sources:
        return "the helloworld transformation accept no sources"
    if parameters:
        return "the helloworld transformation accept no parameter"

def set_computed_metadata(computed_trace):
    computed_trace.set_model("http://example.com/my-trace-model")
    computed_trace.set_origin("1970-01-01T00:00:00")
    return True

def process(computed_trace, sources, change_levels, parameters, state):
    obsel_type = "http://example.com/my-trace-model#my-obsel-type"
    attr_type = "http://example.com/my-trace-model#my-attr-type"
    if state is None:
        with computed_trace.add_obsel(obsel_type, 1000, 2000) as obs:
            obs.add_out(attr_type, "hello")
        return 1, 0, "a"
    else:
        with computed_trace.add_obsel(obsel_type, 2000, 3000) as obs:
            obs.add_out(attr_type, "world")
        return 1, 1, "b"
""" ;
.
